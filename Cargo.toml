[package]
name = "tiny_os"
version = "0.4.0"
authors = ["Your Name <your.email@example.com>"]
edition = "2021"
description = "Minimal x86_64 no_std Rust kernel with robust hardware support"
license = "MIT OR Apache-2.0"
repository = "https://github.com/jungamer-64/OS"
keywords = ["os", "kernel", "no-std", "bare-metal", "x86_64"]
categories = ["no-std", "embedded", "os"]

[package.metadata]
description = "Minimal x86_64 no_std Rust kernel with robust hardware support"
keywords = ["os", "kernel", "no-std", "bare-metal", "x86_64"]
categories = ["no-std", "embedded", "os"]

[dependencies]
# Bootloader for x86_64 bare metal
bootloader = { version = "0.9", features = ["map_physical_memory"] }

# x86_64 specific types and instructions
x86_64 = "0.15.2"

# Spin-based synchronization primitives (no_std compatible)
spin = "0.9.8"

# Lazy static initialization with spin locks
lazy_static = { version = "1.5.0", features = ["spin_no_std"] }

[build-dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

[profile.dev]
# Abort on panic (no unwinding in kernel space)
panic = "abort"

# Enable overflow checks even in dev builds (safety)
overflow-checks = true

# Enable debug assertions
debug-assertions = true

[profile.release]
# Abort on panic (no unwinding in kernel space)
panic = "abort"

# Link-time optimization for smaller binary
lto = true

# Optimize for size while maintaining performance
opt-level = "z"

# Strip debug symbols in release
strip = true

# Enable overflow checks in release (safety over speed)
overflow-checks = true

# Codegen units = 1 for better optimization
codegen-units = 1

[profile.test]
# Use abort even in tests for consistency
panic = "abort"

# Enable overflow checks in tests
overflow-checks = true

# ============================================================================
# Linting Configuration (via Cargo.toml metadata)
# ============================================================================

# Note: These settings are enforced via #![deny(...)] in source files
# Listed here for documentation purposes

# Denied lints (errors):
# - unsafe_op_in_unsafe_fn: Require explicit unsafe blocks
# - missing_debug_implementations: All public types should be debuggable

# Warned lints:
# - missing_docs: Public items should be documented
# - unused_must_use: Results should be handled
# - rust_2018_idioms: Follow modern Rust conventions
